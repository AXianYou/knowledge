# é‡ç‚¹ï¼šã€

- çº¿ç¨‹å°±æ˜¯ç‹¬ç«‹çš„æ‰§è¡Œè·¯å¾„
- åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå³ä½¿æ²¡æœ‰è‡ªå·±åˆ›å»ºçº¿ç¨‹ï¼Œåå°ä¹Ÿä¼šæœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå¦‚ ä¸»çº¿ç¨‹ã€gcçº¿ç¨‹
- main() ç§°ä¹‹ä¸ºä¸»çº¿ç¨‹ï¼Œä¸ºç³»ç»Ÿçš„å…¥å£ï¼Œç”¨äºæ‰§è¡Œæ•´ä¸ªç¨‹åº
- åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¦‚æœå¼€è¾Ÿäº†å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹çš„è¿è¡Œç”±è°ƒåº¦å™¨å®‰æ’è°ƒåº¦ï¼Œè°ƒåº¦å™¨æ˜¯ä¸æ“ä½œç³»ç»Ÿç´§å¯†ç›¸å…³çš„ï¼Œå…ˆåé¡ºåºæ˜¯ä¸èƒ½äººä¸ºçš„å¹²é¢„çš„
- å¯¹åŒä¸€ä»½èµ„æºæ“ä½œæ—¶ï¼Œä¼šå­˜åœ¨èµ„æºæŠ¢å¤ºçš„é—®é¢˜ï¼Œéœ€è¦åŠ å…¥å¹¶å‘æ§åˆ¶
- çº¿ç¨‹ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼Œå¦‚cpuè°ƒåº¦æ—¶é—´ã€å¹¶å‘æ§åˆ¶å¼€é”€
- çº¿ç¨‹æ¯ä¸ªçº¿ç¨‹åœ¨è‡ªå·±çš„å·¥ä½œå†…å­˜äº¤äº’ï¼Œå†…å­˜æ§åˆ¶ä¸å½“ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´

# ä¸€ã€å¤šçº¿ç¨‹çš„å¯åŠ¨çš„æ–¹å¼ï¼š

- ç»§æ‰¿Threadç±»ï¼š
  - å¯åŠ¨çº¿ç¨‹ï¼š å­çº¿ç¨‹.start();
  - ä¸å»ºè®®ä½¿ç”¨ï¼šé¿å…OOPå•ç»§æ‰¿çš„å±€é™æ€§

![image-20221103103603504](images/image-20221103103603504.png)

ç¤ºä¾‹ï¼š

```java
public class ThreadTest01Impl extends Thread{

    private String url;
    private String name;

    public ThreadTest01Impl(String url,String name){
        this.url = url;
        this.name = name;
    }
    @Override
    public void run() {
        WebDownloader webDownloader = new WebDownloader();
        webDownloader.webDownload(url,name);
        System.out.println("ä¸‹è½½äº†æ–‡ä»¶" + name);

    }

    public static void main(String[] args) {
        ThreadTest01Impl threadTest01 = new ThreadTest01Impl("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "1.jpg");
        ThreadTest01Impl threadTest02 = new ThreadTest01Impl("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "2.jpg");
        ThreadTest01Impl threadTest03 = new ThreadTest01Impl("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "3.jpg");

        threadTest01.start();
        threadTest02.start();
        threadTest03.start();
    }
}

class WebDownloader{
    public void webDownload(String url,String name){
        try {
            FileUtils.copyURLToFile(new URL(url),new File(name));
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("IOå¼‚å¸¸ï¼ŒWebDownloaderå¼‚å¸¸");
        }
    }
}
```



- å®ç°Runnable æ¥å£ï¼š
  - å®ç°Runnable æ¥å£å…·æœ‰å¤šçº¿ç¨‹èƒ½åŠ›
  - å¯åŠ¨çº¿ç¨‹ï¼šä¼ å…¥ç›®æ ‡å¯¹è±¡ + Threadå¯¹è±¡.start
  - æ¨èä½¿ç”¨ï¼š é¿å…å•ç»§æ‰¿çš„å±€é™æ€§ï¼Œçµæ´»æ–¹ä¾¿ï¼Œæ–¹ä¾¿ä¸€ä¸ªå¯¹çº¿è¢«å¤šä¸ªçº¿ç¨‹ä½¿ç”¨

![image-20221103103545221](images/image-20221103103545221.png)

ç¤ºä¾‹ï¼š

```java
public class ThreadTest02Impl implements Runnable{
    private String name;
    private String url;

    public ThreadTest02Impl(String url,String name){
        this.name = name;
        this.url = url;
    }

    @Override
    public void run() {
        WebDownLoader1 webDownLoader1 = new WebDownLoader1();
        webDownLoader1.webDownload(url,name);
        System.out.println("ä¸‹è½½äº†" + name);
    }

    public static void main(String[] args) {
        ThreadTest02Impl threadTest01 = new ThreadTest02Impl("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "1.jpg");
        ThreadTest02Impl threadTest02 = new ThreadTest02Impl("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "2.jpg");
        ThreadTest02Impl threadTest03 = new ThreadTest02Impl("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "3.jpg");
        new Thread(threadTest01).start();
        new Thread(threadTest02).start();
        new Thread(threadTest03).start();

    }
}

class WebDownLoader1{
    public void webDownload(String url,String name){
        try {
            FileUtils.copyURLToFile(new URL(url),new File(name));
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("æ–¹æ³•å¼‚å¸¸ï¼ŒThreadTest02Impl");
        }
    }
}
```

# äºŒã€å‡ºç°å¹¶å‘é—®é¢˜ï¼š

```java
/**
 * å¹¶å‘é—®é¢˜
 */
public class ThreadTest03 implements Runnable{
    private int ticketNum = 10;
    @Override
    public void run() {
        while (true){
            if (ticketNum <= 00){
                break;
            }
            // æ¨¡æ‹Ÿå»¶æ—¶
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println(Thread.currentThread().getName() + " æ‹¿åˆ°äº†" + ticketNum-- + "å¼ ç¥¨");
        }
    }
    public static void main(String[] args) {
        ThreadTest03 threadTest03 = new ThreadTest03();
        new Thread(threadTest03,"å°æ˜").start();
        new Thread(threadTest03,"è€å¸ˆ").start();
        new Thread(threadTest03,"test").start();
        new Thread(threadTest03,"sss").start();
    }
}

```

![image-20221103111003504](images/image-20221103111003504.png)

å¯¹åŒä¸€å¯¹è±¡è¿›è¡Œé‡å¤æ“ä½œ

- é¾Ÿå…”èµ›è·‘é—®é¢˜ï¼š

```java
public class Race implements Runnable{
    private static String winner;
    @Override
    public void run() {
        for (int i = 0; i < 101; i++) {
            // åˆ¤æ–­æ¯”èµ›æ˜¯å¦ç»“æŸ
            boolean flag = getWinner(i);
            if (flag){
                break;
            }
            if (Thread.currentThread().getName().equals("å…”å­") && i % 10 == 0){
                try {
                    Thread.sleep(1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }

            System.out.println(Thread.currentThread().getName() + "--> è·‘äº†" +
                    i + "æ­¥");
        }
    }

    private boolean getWinner(int step){
        if (winner != null){
            return true;
        }
        {
            if (step >= 100) {
                winner = Thread.currentThread().getName();
                System.out.println("winner is" + winner);
                return true;
            } else {
                return false;
            }
        }
    }

    public static void main(String[] args) {
        Race race = new Race();
        new Thread(race,"å…”å­").start();
        new Thread(race,"ä¹Œé¾Ÿ").start();
    }
}

```

# ä¸‰ã€å®ç°Callable æ¥å£ï¼ˆäº†è§£å³å¯ï¼‰ï¼š

**å¥½å¤„ï¼š	**

- å¯ä»¥å®šä¹‰è¿”å›å€¼
- å¯ä»¥è·‘å‡ºå¼‚å¸¸

æ­¥éª¤ï¼š

- å®ç°Callableæ¥å£ï¼Œéœ€è¦è¿”å›å€¼ç±»å‹
- é‡å†™call æ–¹æ³•  ï¼ŒæŠ›å‡ºå¼‚å¸¸
- åˆ›å»ºç›®æ ‡å¯¹è±¡
- åˆ›å»ºæ‰§è¡ŒæœåŠ¡ï¼šExecutorService ser = Executors.newFixedThreadPool(3);
- æäº¤æ‰§è¡Œï¼šFuture<Boolean> r1 = ser.submit(callAbleTest01);
- è·å–ç»“æœï¼šboolean rs1 = r1.get();
- å…³é—­æœåŠ¡ï¼šser.shutdown();

```java
```

```java
/**
 * å®ç°callableæ¥å£
 */
public class CallAbleTest01 implements Callable<Boolean> {

    private String url;
    private String name;

    public CallAbleTest01(String url,String name){
        this.name = name;
        this.url = url;
    }
    @Override
    public Boolean call() throws Exception {

        WebDownloaderCallable webDownloaderCallable = new WebDownloaderCallable();
        webDownloaderCallable.WebDownload(url,name);
        System.out.println("callä¸‹è½½æ–‡ä»¶" + name);
        return true;
    }

    public static void main(String[] args) throws ExecutionException, InterruptedException {
        CallAbleTest01 callAbleTest01 = new CallAbleTest01("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "1.jpg");
        CallAbleTest01 callAbleTest02 = new CallAbleTest01("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "2.jpg");
        CallAbleTest01 callAbleTest03 = new CallAbleTest01("https://img2.nongji360.com/n/news/2020/06/17092829650213.jpg", "3.jpg");
        // åˆ›å»ºæ‰§è¡ŒæœåŠ¡
        ExecutorService ser = Executors.newFixedThreadPool(3);

        // æäº¤æ‰§è¡Œç»“æœ
        Future<Boolean> r1 = ser.submit(callAbleTest01);
        Future<Boolean> r2 = ser.submit(callAbleTest02);
        Future<Boolean> r3 = ser.submit(callAbleTest03);
        // è·å–ç»“æœ
            boolean rs1 = r1.get();
            boolean rs2 = r2.get();
            boolean rs3 = r3.get();

            // å…³é—­æœåŠ¡
        ser.shutdown();
    }
}

// æ–‡ä»¶ä¸‹è½½ç±»
class WebDownloaderCallable{
    public void WebDownload(String url,String name){
        try {
            FileUtils.copyURLToFile(new URL(url),new File(name));
        } catch (IOException e) {
            e.printStackTrace();
            System.out.println("å‡ºç°å¼‚å¸¸æƒ…å†µ" + "WebDownloadCallable");
        }
    }
}
```

# å››ã€é™æ€ä»£ç†:

æ¨¡æ‹Ÿé™æ€ä»£ç†ï¼š

```java
import java.util.Scanner;

/**
 * æ¨¡æ‹Ÿé™æ€ä»£ç†
 */
public class StaticProxy {
    public static void main(String[] args) {
        
        // ä¼ å…¥çš„ä¸ºä»£ç†çš„äºº
        MerryCompany merryCompany = new MerryCompany(new Person());
        Scanner scanner = new Scanner(System.in);
        String name = scanner.next();
        merryCompany.happyMarry(name);
    }
}

interface HappyMerry{
    void happyMarry(String name);
}
// Person ç±»  ç»“å©šçš„äºº
class Person implements HappyMerry{

    @Override
    public void happyMarry(String name) {
        System.out.println(name + "è¦ç»“å©šäº†");
    }
}

// å©šåº†å…¬å¸ç±»  å¸®åŠ©ç»“å©š
class MerryCompany implements HappyMerry {

    private HappyMerry merry;
    // æ„é€ å™¨   
    public MerryCompany(HappyMerry merry){
        this.merry = merry;
    }
    @Override
    public void happyMarry(String name) {
        this.merryBefore();
        this.merry.happyMarry(name);
        this.merryAfter();
    }

    public void merryBefore(){
        System.out.println("ç»“å©šä¹‹å‰å¸ƒç½®åœºåœ°");
    }

    public void merryAfter(){
        System.out.println("ç»“å©šä¹‹åæ”¶é’±");
    }
}

```

# äº”ã€çº¿ç¨‹çš„äº”å¤§çŠ¶æ€ï¼š

- åˆ›å»ºçŠ¶æ€ï¼šå¯åŠ¨çº¿ç¨‹
- å°±ç»ªçŠ¶æ€ï¼šçº¿ç¨‹å¯åŠ¨ä¹‹åæˆ–é˜»å¡ç»“æŸã€é‡Šæ”¾CPUèµ„æº
- é˜»å¡çŠ¶æ€ï¼šè¿è¡ŒçŠ¶æ€åç­‰å¾…ç”¨æˆ·è¾“å…¥ç­‰ã€
- è¿è¡ŒçŠ¶æ€ï¼šè·å¾—CPUèµ„æº
- æ­»äº¡çŠ¶æ€ï¼šçº¿ç¨‹è‡ªç„¶æ‰§è¡Œå®Œæˆã€å¤–éƒ¨å¹²æ¶‰ç»ˆæ­¢

![image-20221103173348132](images/image-20221103173348132.png)

## çº¿ç¨‹çš„æ–¹æ³•ï¼š

![image-20221103173429415](images/image-20221103173429415.png)

###  1ã€åœæ­¢çº¿ç¨‹ï¼š

- å»ºè®®ä½¿çº¿ç¨‹æ­£å¸¸åœæ­¢ï¼Œ-------åˆ©ç”¨å¾ªç¯è¿›è¡Œï¼Œä¸è¦ä½¿ç”¨æ­»å¾ªç¯
- å»ºè®®ä½¿ç”¨æ ‡å¿—ä½   ----- è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½è¿›è¡Œçº¿ç¨‹åœæ­¢
- ä¸è¦ä½¿ç”¨Stop   æˆ–è€…destory æˆ–jdkå®˜æ–¹ä¸å»ºè®®ä½¿ç”¨çš„æ–¹æ³•è¿›è¡Œåœæ­¢çº¿ç¨‹

ä½¿ç”¨æ ‡å¿—ä½è¿›è¡Œåœæ­¢çº¿ç¨‹

```java
public class TestStop implements Runnable{
    private boolean flag = true;
    @Override
    public void run() {
        int i = 0;
        while (flag){
            System.out.println("å¤šçº¿ç¨‹æ­£åœ¨è¿›è¡Œã€‚ã€‚ã€‚ã€‚ã€‚" + i++);
        }
    }

    // çº¿ç¨‹æ ‡å¿—ä½è½¬æ¢
    public void stop(){
        this.flag = false;
    }

    public static void main(String[] args) {
        TestStop testStop = new TestStop();
        new Thread(testStop).start();
        for (int i = 0; i < 1000; i++) {
            System.out.println("main è¿è¡Œ" + i);
            if (i == 900){
                // è¿›è¡Œçº¿ç¨‹æ ‡å¿—ä½è½¬æ¢
                testStop.stop();
                System.out.println("çº¿ç¨‹æµ‹è¯•åœæ­¢");
            }
        }
    }
}
```

### 2ã€çº¿ç¨‹ä¼‘çœ ï¼ˆsleepï¼‰

- sleep(æ—¶é—´)  æŒ‡å®šå½“å‰çº¿ç¨‹ä¼‘çœ çš„æ—¶é—´
- sleep å­˜åœ¨å¼‚å¸¸ InterreputedException
- sleep æ—¶é—´è¾¾åˆ°åçº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€
- sleep æ¨¡æ‹Ÿç½‘ç»œå»¶æ—¶ï¼Œå€’è®¡æ—¶ç­‰
- æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé”ï¼Œsleep ä¸ä¼šé‡Šæ”¾é”

æµ‹è¯•å»¶æ—¶

```java
public class ThreadTest03 implements Runnable{
    private int ticketNum = 10;
    @Override
    public void run() {
        while (true){
            if (ticketNum <= 00){
                break;
            }
            // æ¨¡æ‹Ÿå»¶æ—¶   å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µ   æ–¹æ³•é—®é¢˜çš„å‘ç”Ÿæ€§
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println(Thread.currentThread().getName() + " æ‹¿åˆ°äº†" + ticketNum-- + "å¼ ç¥¨");
        }
    }
    public static void main(String[] args) {
        ThreadTest03 threadTest03 = new ThreadTest03();
        new Thread(threadTest03,"å°æ˜").start();
        new Thread(threadTest03,"è€å¸ˆ").start();
        new Thread(threadTest03,"test").start();
        new Thread(threadTest03,"sss").start();
    }
}
```

æµ‹è¯•å€’è®¡æ—¶

```java
// æ¨¡æ‹Ÿå€’è®¡æ—¶
public class TestSleep02 {
    public static void main(String[] args) {
        try {
            time();
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
    }
    public static void time() throws InterruptedException {
        int num = 10;
        while (true){
            // è¿›è¡Œçº¿ç¨‹ä¼‘çœ æ¨¡æ‹Ÿå€’è®¡æ—¶
            Thread.sleep(1000);
            System.out.println(num--);
            if (num <= 0)break;
        }
    }
}
```

### 3ã€çº¿ç¨‹ç¤¼è®©ï¼ˆyieldï¼‰

- è®©å½“å‰æ‰§è¡Œçš„çº¿ç¨‹æš‚åœï¼Œä½†æ˜¯ä¸ä¼šé˜»å¡
- è®©çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬æ¢ä¸ºå°±ç»ªçŠ¶æ€
- è®©cpu é‡æ–°è°ƒåº¦ï¼Œç¤¼è®©ä¸ä¸€å®šæˆåŠŸï¼Œçœ‹ CPU è°ƒåº¦è¿›è¡Œ

```java
// ç¤¼è®©ä¸ä¸€å®šæˆåŠŸ
    // æµ‹è¯•ç¤¼è®©
public class TestYield {
    public static void main(String[] args) {
        MyYield myYield = new MyYield();
        new Thread(myYield,"a").start();
        new Thread(myYield,"b").start();
    }
}
class MyYield implements Runnable{

    @Override
    public void run() {
        System.out.println(Thread.currentThread().getName() + "çº¿ç¨‹å¼€å§‹æ‰§è¡Œã€‚ã€‚");
        Thread.yield();
        System.out.println(Thread.currentThread().getName() + "çº¿ç¨‹æ‰§è¡Œç»“æŸã€‚ã€‚");
    }
}
```

### 4ã€çº¿ç¨‹çš„å¼ºåˆ¶æ‰§è¡Œï¼ˆjoinï¼‰ï¼š

- join åˆå¹¶çº¿ç¨‹ï¼Œå¾…æ­¤çº¿ç¨‹æ‰§è¡Œå®Œæˆä¹‹åï¼Œå†æ‰§è¡Œå…¶ä»–çº¿ç¨‹ï¼Œå…¶ä½™çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€
- å¯ä»¥æƒ³è±¡ä¸ºæ’é˜Ÿ

```java
// æµ‹è¯•join
public class TestJoin implements Runnable{
    @Override
    public void run() {
        try {
            Thread.sleep(1000);   // æ·»åŠ çº¿ç¨‹ä¼‘çœ å‡¸æ˜¾joinä½œç”¨
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
        for (int i = 0; i < 100; i++) {
            System.out.println(" run" + i);
        }
    }
// ä¸»çº¿ç¨‹
    public static void main(String[] args) throws InterruptedException {
        TestJoin testJoin = new TestJoin();
        Thread thread = new Thread(testJoin);
        thread.start();


        for (int i = 0; i < 200; i++) {
            if (i == 100){
                thread.join();
            }
            System.out.println(" main " + i);
        }
    }
}
```

#### **æ³¨æ„ï¼š**

- çº¿ç¨‹ä¸­æ–­æˆ–è€…ç»“æŸï¼Œå³çº¿ç¨‹è¿›å…¥æ­»äº¡çŠ¶æ€ï¼Œä¸èƒ½å¤Ÿé‡æ–°å¯åŠ¨

### 5ã€çº¿ç¨‹ä¼˜å…ˆçº§ï¼š

- Java æä¾›ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨æ¥ç›‘æ§ç¨‹åºä¸­å¯åŠ¨åè¿›å…¥å°±ç»ªçŠ¶æ€çš„æ‰€æœ‰çº¿ç¨‹ ï¼Œçº¿ç¨‹è°ƒåº¦å™¨æŒ‰ç…§çº¿ç¨‹çš„ä¼˜å…ˆçº§å†³å®šä¼˜å…ˆè°ƒåº¦å“ªä¸ªçº¿ç¨‹
- çº¿ç¨‹çš„ä¼˜å…ˆçº§ä½¿ç”¨æ•°å­—è¡¨ç¤ºï¼ŒèŒƒå›´ 1~10
  - Thread.MIN_PRIORITY = 1;
  - Thread.MAX_PRIORITY = 10;
  - Thread.NORM_PRIORITY = 5;
- ä½¿ç”¨ä¸€ä¸‹æ–¹å¼æ”¹å˜æˆ–è·å–ä¼˜å…ˆçº§
  - getPriority().setPriority(int xxx);

```java
// æµ‹è¯•çº¿ç¨‹çš„ä¼˜å…ˆçº§
public class TestPriority {
    public static void main(String[] args) {
        // ä¸»çº¿ç¨‹çš„é»˜è®¤ä¼˜å…ˆçº§
        System.out.println(Thread.currentThread().getName() + " -----> " + Thread.currentThread().getPriority());
        MyPriority myPriority = new MyPriority();
        Thread t1 = new Thread(myPriority);
        Thread t2 = new Thread(myPriority);
        Thread t3 = new Thread(myPriority);
        Thread t4 = new Thread(myPriority);
        Thread t5 = new Thread(myPriority);
        Thread t6 = new Thread(myPriority);

        t1.setPriority(1);
        t2.setPriority(4);
        t3.setPriority(Thread.MAX_PRIORITY); // MAX_PRIORITY = 10;
        t4.setPriority(6);
        t5.setPriority(Thread.NORM_PRIORITY); // NORM_PRIORITY = 5;
        t6.setPriority(2);
        
        t1.start();
        t2.start();
        t3.start();
        t4.start();
        t5.start();
        t6.start();

    }
}

class MyPriority implements Runnable{
    @Override
    public void run() {
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
        System.out.println(Thread.currentThread().getName() + " ----> " + Thread.currentThread().getPriority());
    }
}
```

#### **æ³¨æ„ï¼š**

- é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æ¯”ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰æ›´é«˜çš„å‡ ç‡å¾—åˆ°æ‰§è¡Œï¼Œå®é™…ä¸Šè¿™å’Œæ“ä½œç³»ç»ŸåŠè™šæ‹Ÿæœºç‰ˆæœ¬ç›¸å…³ï¼Œæœ‰å¯èƒ½å³ä½¿è®¾ç½®äº†çº¿ç¨‹çš„ä¼˜å…ˆçº§ä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•ä½œç”¨ã€‚
- è°ƒåº¦çš„é¡ºåºç”±CPUå†³å®š

### 6ã€å®ˆæŠ¤çº¿ç¨‹ï¼ˆdaemonï¼‰

- çº¿ç¨‹åˆ†ä¸ºç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹
- è™šæ‹Ÿæœºå¿…é¡»ç¡®ä¿ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
- è™šæ‹Ÿæœºä¸å¿…ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
- å¦‚åå°è®°å½•æ“ä½œæ—¥å¿—ã€åƒåœ¾å›æ”¶ç­‰ç­‰

```java
// æµ‹è¯•å®ˆæŠ¤çº¿ç¨‹
public class TestDaemon {
    public static void main(String[] args) {
        God god = new God();
        YourSelf yourSelf = new YourSelf();
        Thread thread = new Thread(god);
        thread.setDaemon(true);   //   é»˜è®¤ä¸ºfalse   å³é»˜è®¤ä¸ºç”¨æˆ·çº¿ç¨‹
        thread.start();

        new Thread(yourSelf).start();
    }
}

class YourSelf implements Runnable{

    @Override
    public void run() {
        for (int i = 0; i < 36500; i++) {
            System.out.println("æ­£å¸¸çš„ç”Ÿæ´»=====" + i);
        }
    }
}

class God implements Runnable{

    @Override
    public void run() {
        while (true){
            System.out.println("æ­£åœ¨ä¸ºä½ åŠ æ²¹");
        }
    }
}
```

### **7ã€çº¿ç¨‹åŒæ­¥ï¼š**

- åŒä¸€ä¸ªèµ„æºï¼Œå¤šä¸ªäººéƒ½æƒ³ä½¿ç”¨
- å¤„ç†å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æŸäº›çº¿ç¨‹è¿˜æƒ³ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ï¼Œè¿™æ—¶å€™å°±éœ€è¦çº¿ç¨‹åŒæ­¥
- çº¿ç¨‹åŒæ­¥æ˜¯ä¸€ç§ç­‰å¾…æœºåˆ¶ï¼Œå¤šä¸ªéœ€è¦åŒæ—¶è®¿é—®æ­¤å¯¹è±¡çš„çº¿ç¨‹è¿›å…¥è¿™ä¸ª**å¯¹è±¡çš„ç­‰å¾…æ± ** å½¢æˆé˜Ÿåˆ—ï¼Œç­‰å¾…å‰é¢çº¿ç¨‹ä½¿ç”¨å®Œæ¯•ï¼Œä¸‹ä¸€ä¸ªçº¿ç¨‹å†ä½¿ç”¨ã€‚

- å½¢æˆæ¡ä»¶ï¼šé˜Ÿåˆ—å’Œé” è§£å†³çº¿ç¨‹å®‰å…¨æ€§ï¼Œå³çº¿ç¨‹åŒæ­¥ synchronized



- ç”±äºåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å­˜å‚¨ç©ºé—´ï¼Œåœ¨å¸¦æ¥çš„æ–¹ä¾¿çš„åŒæ—¶ä¹Ÿå¸¦æ¥äº†è®¿é—®å†²çªçš„é—®é¢˜ï¼Œä¸ºäº†ä¿è¯æ•°æ®åœ¨æ–¹æ³•ä¸­è¢«è®¿é—®æ—¶çš„æ­£ç¡®æ€§ï¼Œåœ¨è®¿é—®è¿‡ç¨‹ä¸­æ·»åŠ é”æœºåˆ¶ **synchronized** ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å–å¯¹è±¡çš„æ’ä»–é”ï¼Œç‹¬å èµ„æºï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œç„¶åé‡Šæ”¾é”ä¹‹åå³å¯ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
  - ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ä¼šå¯¼è‡´å…¶ä»–æ‰€æœ‰éœ€è¦æ­¤é”çš„çº¿ç¨‹æŒ‚èµ·
  - åœ¨å¤šçº¿ç¨‹ç«äº‰ä¸‹ï¼ŒåŠ é”ã€é‡Šæ”¾é”ä¼šå¯¼è‡´è¾ƒå¤šçš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œè°ƒåº¦å»¶æ—¶ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜
  - å¦‚æœä¸€ä¸ªä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç­‰å¾…ä¸€ä¸ªä¼˜å…ˆçº§ä½çš„çº¿ç¨‹é‡Šæ”¾é”ï¼Œä¼šå¯¼è‡´ä¼˜å…ˆçº§å€’ç½®ï¼Œå¼•èµ·æ€§èƒ½é—®é¢˜

å¼‚å¸¸ç¤ºä¾‹ï¼š

```java
//æ¨¡æ‹Ÿé“¶è¡Œå–æ¬¾
public class Syn {
    public static void main(String[] args) {
        Account account = new Account(100, "åŸºé‡‘");

        Drawing nv = new Drawing(account, 50, "nv");
        Drawing nan = new Drawing(account, 100, "nan");

        nv.start();
        nan.start();

    }

}

// è´¦æˆ·ä½™é¢ä¿¡æ¯
class Account{
    int money;  // è´¦æˆ·ä½™é¢
    String name;// è´¦æˆ·åç§°
    public Account(int money,String name){
        this.name = name;
        this.money = money;
    }
}

//é“¶è¡Œå–æ¬¾
class Drawing extends Thread{
    // è´¦æˆ·
    Account account;
    // å–é’±æ•°
    int drawingMoney;
    // ä½ æ‰‹é‡Œçš„ğŸ’´
    int nowMoney;
    public Drawing(Account account, int drawingMoney, String name) {
        super(name);
        this.account = account;
        this.drawingMoney = drawingMoney;
//        this.nowMoney = nowMoney;
//        this.name = name;

    }

    @Autowired
    public void run(){    
            // åˆ¤æ–­æœ‰æ²¡æœ‰ğŸ’´
            if (account.money - drawingMoney < 0){
                System.out.println(Thread.currentThread().getName() + "é’±ä¸å¤Ÿ");
                return;
            }
            account.money = account.money - drawingMoney;   // å¡å†…ä½™é¢
            nowMoney = nowMoney + drawingMoney;  //ä½ æ‰‹é‡Œçš„ğŸ’´
            System.out.println(account.name + "ä½™é¢ä¸º" + account.money);
            System.out.println(this.getName() + "ç°åœ¨çš„é’±æ•°" + nowMoney);
    }
}
```

![image-20221108160844201](images/image-20221108160844201.png)

#### åŒæ­¥æ–¹æ³•ï¼š

- ç”±äºå¯ä»¥é€šè¿‡ private å…³é”®å­—æ¥ä¿è¯æ•°æ®å¯¹è±¡åªèƒ½è¢«æ–¹æ³•è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦é’ˆå¯¹æ–¹æ³•æå‡ºä¸€å¥—æœºåˆ¶ï¼Œè¿™å¥—æœºåˆ¶å°±æ˜¯ syncronized å…³é”®å­—ï¼ŒåŒ…æ‹¬ä¸¤ç§ç”¨æ³• ï¼š  synchronized æ–¹æ³• å’Œ synchronized å—

â€‹					åŒæ­¥æ–¹æ³•ï¼š public synchronized void method(int args){}

- synchronized æ–¹æ³•æ§åˆ¶å¯¹ â€œ å¯¹è±¡â€ çš„è®¿é—®ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡å¯¹åº”ä¸€æŠŠé”ï¼Œæ¯ä¸ª synchronized æ–¹æ³•éƒ½å¿…é¡»è·å¾—è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡çš„é”æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™çº¿ç¨‹ä¼šé˜»å¡ï¼Œæ–¹æ³•ä¸€æ—¦æ‰§è¡Œï¼Œå°±ç‹¬å è¯¥é”ï¼ŒçŸ¥é“è¯¥æ–¹æ³•è¿”å›æ‰é‡Šæ”¾é”ï¼Œåé¢è¢«é˜»å¡çš„çº¿ç¨‹æ‰èƒ½è·å¾—è¿™ä¸ªé”ï¼Œç»§ç»­æ‰§è¡Œ

â€‹					ç¼ºé™·ï¼š è‹¥å°†ä¸€ä¸ªå¤§çš„æ–¹æ³•ç”³æ˜ä¸º synchronized å°†ä¼šå½±å“æ•ˆç‡

####  åŒæ­¥å—ï¼š synchronized(Obj){	}

- Obj ç§°ä¹‹ä¸ºåŒæ­¥ç›‘è§†å™¨
  - Obj å¯ä»¥ä¸ºä»»ä½•å¯¹è±¡ï¼Œä½†æ˜¯æ¨èä½¿ç”¨å…±äº«èµ„æºä½œä¸ºåŒæ­¥ç›‘è§†å™¨
  - åŒæ­¥æ–¹æ³•ä¸­æ— éœ€æŒ‡å®šåŒæ­¥ç›‘è§†å™¨ï¼Œå› ä¸ºåŒæ­¥æ–¹æ³•çš„åŒæ­¥ç›‘è§†å™¨å°±æ˜¯thisï¼Œå°±æ˜¯è¿™ä¸ªå¯¹è±¡æœ¬èº«ï¼Œæˆ–è€…æ˜¯ class
- åŒæ­¥ç›‘è§†å™¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼š
  - 1ã€ç¬¬ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œé”å®šåŒæ­¥ç›‘è§†å™¨ï¼Œæ‰§è¡Œå…¶ä¸­çš„ä»£ç 
  - 2ã€ç¬¬äºŒä¸ªçº¿ç¨‹è®¿é—®ï¼Œå‘ç°åŒæ­¥ç›‘è§†å™¨è¢«é”å®šï¼Œæ— æ³•è®¿é—®
  - 3ã€ç¬¬ä¸€ä¸ªçº¿ç¨‹è®¿é—®å®Œæ¯•ï¼Œè§£é”åŒæ­¥ç›‘è§†å™¨
  - 4ã€ç¬¬äºŒä¸ªçº¿ç¨‹è®¿é—®ï¼Œå‘ç°åŒæ­¥ç›‘è§†å™¨æ²¡æœ‰é”ï¼Œç„¶åé”å®šå¹¶è®¿é—®

```java
//æ¨¡æ‹Ÿé“¶è¡Œå–æ¬¾
public class Syn {
    public static void main(String[] args) {
        Account account = new Account(100, "åŸºé‡‘");
        Drawing nv = new Drawing(account, 50, "nv");
        Drawing nan = new Drawing(account, 100, "nan");

        nv.start();
        nan.start();

    }
}
// è´¦æˆ·ä½™é¢ä¿¡æ¯
class Account{
    int money;  // è´¦æˆ·ä½™é¢
    String name;// è´¦æˆ·åç§°
    public Account(int money,String name){
        this.name = name;
        this.money = money;
    }
}
//é“¶è¡Œå–æ¬¾
class Drawing extends Thread{
    Account account;  // è´¦æˆ·
    int drawingMoney;  // å–é’±æ•°
    int nowMoney; // ä½ æ‰‹é‡Œçš„ğŸ’´
    public Drawing(Account account, int drawingMoney, String name) {
        super(name);
        this.account = account;
        this.drawingMoney = drawingMoney;
//        this.nowMoney = nowMoney;
//        this.name = name;
    }

    @Autowired
    public void run(){
        //æ·»åŠ åŒæ­¥å—
        synchronized (account){
            // åˆ¤æ–­æœ‰æ²¡æœ‰ğŸ’´
            if (account.money - drawingMoney < 0){
                System.out.println(Thread.currentThread().getName() + "é’±ä¸å¤Ÿ");
                return;
            }
            account.money = account.money - drawingMoney;   // å¡å†…ä½™é¢
            nowMoney = nowMoney + drawingMoney;  //ä½ æ‰‹é‡Œçš„ğŸ’´
            System.out.println(account.name + "ä½™é¢ä¸º" + account.money);
            System.out.println(this.getName() + "ç°åœ¨çš„é’±æ•°" + nowMoney);
        }

    }
}
```

# å…­ã€æ­»é”ï¼š

- å¤šä¸ªçº¿ç¨‹å„è‡ªå æœ‰ä¸€äº›äº›å…±äº«èµ„æºï¼Œå¹¶ä¸”äº’ç›¸ç­‰å¾…å…¶ä»–çº¿ç¨‹å æœ‰çš„èµ„æºæ‰èƒ½è¿è¡Œï¼Œè€Œå¯¼è‡´ä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹éƒ½åœ¨ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼Œéƒ½åœæ­¢æ‰§è¡Œçš„æƒ…å½¢ã€‚æŸä¸€ä¸ªåŒæ­¥å—åŒäº‹æ‹¥æœ‰ â€œ ä¸¤ä¸ªä»¥ä¸Šå¯¹è±¡çš„é” â€ æ—¶ï¼Œå°±å¯èƒ½ä¼šå‘ç”Ÿ â€œæ­»é”â€çš„é—®é¢˜ã€‚

æ¨¡æ‹Ÿæ­»é”ï¼š

```java
// æ¨¡æ‹Ÿæ­»é”
public class DeadLock {
    public static void main(String[] args) {

        MakeUp g1 = new MakeUp(0, "g1");
        MakeUp g2 = new MakeUp(1, "g2");
        g1.start();
        g2.start();
    }
}
// é•œå­
class Mirror{}
// å£çº¢
class Lipstick{}

// åŒ–å¦†
class MakeUp extends Thread{
    static  Mirror mirror  = new Mirror();
    static Lipstick lipstick = new Lipstick();   // ç¡®ä¿èµ„æºåªæœ‰ä¸€ä»½ï¼Œä½¿ç”¨static æ¥è¿›è¡Œä¿®é¥°

    int choice;  // é€‰æ‹©
    String name;  // ä½¿ç”¨è€…
    MakeUp(int choice,String name){
        this.choice = choice;
        this.name = name;
    }
    @Override
    public void run() {
        try {
            makeUp();
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
    }
    private void makeUp() throws InterruptedException {
        if (choice == 0){
            synchronized (mirror){
                System.out.println(this.name + " è·å¾—äº†é•œå­é”");
                Thread.sleep(1000);
                synchronized (lipstick){
                    System.out.println(this.name + "è·å¾—äº†å£çº¢é”");
                }
            }
        }else {
            synchronized (lipstick){
                System.out.println(this.name + " è·å¾—äº†å£çº¢é”");
                Thread.sleep(2000);
                synchronized (mirror){
                    System.out.println(this.name + "è·å¾—äº†é•œå­é”");
                }
            }
        }
    }
}
```

#### æ­»é”çš„æ¡ä»¶ï¼š

- 1ã€äº’æ–¥æ¡ä»¶ï¼šæ¯ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨
- 2ã€è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹ä»¥è·å¾—çš„èµ„æºä¿æŒä¸æ”¾
- 3ã€ä¸å‰¥å¤ºæ¡ä»¶ï¼šè¿›ç¨‹å·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤º
- 4ã€å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šè‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»

åªéœ€è¦æƒ³åŠæ³•ç ´é™¤å…¶ä¸­ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶å°±å¯ä»¥é¿å…æ­»é”å‘ç”Ÿ

è§£å†³åŠæ³•ï¼š

```java
private void makeUp() throws InterruptedException {
        if (choice == 0){
            synchronized (mirror){
                System.out.println(this.name + " è·å¾—äº†é•œå­é”");
                Thread.sleep(1000);
            }
            synchronized (lipstick){
                System.out.println(this.name + "è·å¾—äº†å£çº¢é”");
            }
        }else {
            synchronized (lipstick){
                System.out.println(this.name + " è·å¾—äº†å£çº¢é”");
                Thread.sleep(2000);
            }
            synchronized (mirror){
                System.out.println(this.name + "è·å¾—äº†é•œå­é”");
            }
        }
    }
```

# ä¸ƒã€é”ï¼š

- ä»JDK 5.0 å¼€å§‹ï¼Œjavaæä¾›äº†æ›´å¼ºå¤§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶â€”â€”é€šè¿‡æ˜¾å¼å®šä¹‰åŒæ­¥é”å¯¹è±¡å®ç°åŒæ­¥ã€‚åŒæ­¥é”ä½¿ç”¨Lockå¯¹è±¡å……å½“
- java.util.concurrent.locks.Lock æ¥å£æ—¶æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„å·¥å…·ï¼Œæ‰€æä¾›äº†å¯¹å…±äº«èµ„æºçš„ç‹¬å è®¿é—®ï¼Œæ¯æ¬¡åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å¯¹Lockå¯¹è±¡åŠ é”ï¼Œçº¿ç¨‹å¼€å§‹è®¿é—®å…±äº«èµ„æºä¹‹å‰åº”å…ˆè·å¾—Lockå¯¹è±¡
- ReentrantLock ç±»å®ç°äº†Lock ï¼Œå®ƒæ‹¥æœ‰ä¸ synchronized ç›¸åŒçš„å¹¶å‘æ€§å’Œå†…å­˜è¯­ä¹‰ï¼Œåœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ§åˆ¶ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ—¶ReentrantLockï¼Œå¯ä»¥æ˜¾å¼åŠ é”ã€é‡Šæ”¾é”ã€‚

## ReentrantLock ï¼ˆå¯é‡å…¥é”ï¼‰ï¼š

```java
public class LockTest01 {
    public static void main(String[] args) {
        TicketNum ticketNum = new TicketNum();
        new Thread(ticketNum).start();
        new Thread(ticketNum).start();
        new Thread(ticketNum).start();
    }
}
class TicketNum implements Runnable{
    int ticketNums = 10;

    //å®šä¹‰locké”
    private final ReentrantLock reentrantLock = new ReentrantLock();

    @Override
    public void run() {
        while (true){
            try {
                // åŠ é”
                reentrantLock.lock();
                if (ticketNums > 0){

                    System.out.println(ticketNums--);
                }else {
                    break;
                }
            }finally {
                //è§£é”
                reentrantLock.unlock();
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    throw new RuntimeException(e);
                }
            }

        }
    }
}
```

# å…«ã€synchronized ä¸ Lock çš„å¯¹æ¯”ï¼š

- Lock æ˜¯æ˜¾å¼é”ï¼ˆæ‰‹åŠ¨å¼€å¯å’Œå…³é—­é”ï¼Œåˆ«å¿˜è®°å…³é”ï¼‰ synchronized æ˜¯éšå¼é”ï¼Œé™¤äº†ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾
- Lockåªæœ‰ä»£ç å—é”ï¼Œsynchronized æœ‰ä»£ç å—é”å’Œæ–¹æ³•é”
- ä½¿ç”¨Locké”ï¼ŒJVMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ï¼Œå¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šå­ç±»ï¼‰
- ä½¿ç”¨ä¼˜å…ˆé¡ºåºï¼š
  - Lock > åŒæ­¥ä»£ç å—ï¼ˆå·²ç»è¿›å…¥æ–¹æ³•ä½“ï¼Œåˆ†é…äº†ç›¸åº”èµ„æºï¼‰ > åŒæ­¥æ–¹æ³•ï¼ˆåœ¨æ–¹æ³•ä½“ä¹‹å¤–ï¼‰

# ä¹ã€çº¿ç¨‹ååŒï¼š

- çº¿ç¨‹é€šä¿¡ï¼šæ˜¯ä¸€ä¸ªçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å…±äº«åŒä¸€ä¸ªèµ„æºï¼Œå¹¶ä¸”ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œäº’ä¸ºæ¡ä»¶ã€‚
  - åœ¨ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ä¸­ï¼Œä»…æœ‰synchronized æ˜¯ä¸å¤Ÿçš„
    - synchronized å¯é˜»æ­¢å¹¶å‘æ›´æ–°åŒä¸€ä¸ªå…±äº«èµ„æºï¼Œå®ç°äº†åŒæ­¥
    - synchronized ä¸èƒ½ç”¨æ¥å®ç°ä¸åŒçº¿ç¨‹ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ï¼ˆé€šä¿¡ï¼‰



- è§£å†³çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡é—®é¢˜ï¼š
  - wait() ï¼š è¡¨ç¤ºçº¿ç¨‹ä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹é€šçŸ¥ï¼Œä¸sleep ä¸åŒï¼Œä¼šé‡Šæ”¾é”
  - wait(long timeout) ï¼š æŒ‡å®šç­‰å¾…çš„æ¯«ç§’æ•°
  - notify() ï¼š å”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹
  - notifyAll() ï¼š å”¤é†’åŒä¸€ä¸ªå¯¹è±¡ä¸Šæ‰€æœ‰è°ƒç”¨wait() æ–¹æ³•çš„çº¿ç¨‹ï¼Œä¼˜å…ˆçº§åˆ«é«˜çš„çº¿ç¨‹ä¼˜å…ˆè°ƒåº¦
- **æ³¨æ„ï¼š** å‡æ˜¯Objectç±»çš„æ–¹æ³•ï¼Œéƒ½åªèƒ½åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥ä»£ç å—ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸IIIegaImonitorStateExcrption

# åã€çº¿ç¨‹æ± ï¼š

- èƒŒæ™¯ï¼šç»å¸¸åˆ›å»ºå’Œé”€æ¯ã€ä½¿ç”¨é‡ç‰¹åˆ«å¤§çš„èµ„æºï¼Œæ¯”å¦‚å¹¶å‘æƒ…å†µä¸‹çš„çº¿ç¨‹ï¼Œå¯¹æ€§èƒ½å½±å“å¾ˆå¤§
- æ€è·¯ï¼šæå‰åˆ›å»ºå¥½å¤šä¸ªçº¿ç¨‹ï¼Œæ”¾å…¥çº¿ç¨‹æ± ä¸­ï¼Œä½¿ç”¨æ—¶ç›´æ¥è·å–ï¼Œä½¿ç”¨å®Œæ”¾å›æ± ä¸­å¯ä»¥é¿å…é¢‘ç¹çš„åˆ›å»ºé”€æ¯ã€å®ç°é‡å¤åˆ©ç”¨ã€‚
- å¥½å¤„ï¼š
  - æé«˜å“åº”é€Ÿåº¦ï¼ˆå‡å°‘äº†åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´ï¼‰
  - é™ä½èµ„æºæ¶ˆè€—ï¼ˆé‡å¤åˆ©ç”¨çº¿ç¨‹æ± ä¸­çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºï¼‰
  - ä¾¿äºçº¿ç¨‹ç®¡ç†
    - corePoolSize ï¼š æ ¸å¿ƒæ± çš„å¤§å°
    - maximumPoolSize ï¼š æœ€å¤§çº¿ç¨‹æ•°
    - keepAliveTime ï¼š çº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢
- JDK 5.0 èµ·æä¾›äº†çº¿ç¨‹æ± ç›¸å…³API ï¼š ExecutorService å’Œ Executors
- ExecutorService ï¼š çœŸæ­£çš„çº¿ç¨‹æ± æ¥å£ã€‚å¸¸è§å­ç±» ThreadPoolExecutor
  - void execute(Runnable command) : æ‰§è¡Œä»»åŠ¡/å‘½ä»¤ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡ŒRunnable
  - <T> Future<T> submit(Callable<T> task) ï¼šæ‰§è¡Œä»»åŠ¡ï¼Œæœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡ŒCallable
  - void shutdown() ï¼šå…³é—­è¿æ¥æ± 
- Executors ï¼š å·¥å…·ç±»ã€çº¿ç¨‹æ± çš„å·¥å‚ç±»ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸åŒç±»å‹çš„çº¿ç¨‹æ± 
